<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TechHub | Premium Technology</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            // Premium color palette
            primary: {
              50: '#f0f9ff',
              100: '#e0f2fe',
              200: '#bae6fd',
              300: '#7dd3fc',
              400: '#38bdf8',
              500: '#0ea5e9',
              600: '#0284c7',
              700: '#0369a1',
              800: '#075985',
              900: '#0c4a6e',
            },
            neutral: {
              50: '#fafafa',
              100: '#f5f5f5',
              200: '#e5e5e5',
              300: '#d4d4d4',
              400: '#a3a3a3',
              500: '#737373',
              600: '#525252',
              700: '#404040',
              800: '#262626',
              900: '#171717',
            },
            gold: {
              300: '#fde68a',
              400: '#facc15',
              500: '#eab308',
              600: '#ca8a04',
            },
            slate: {
              50: '#f8fafc',
              100: '#f1f5f9',
              200: '#e2e8f0',
              300: '#cbd5e1',
              400: '#94a3b8',
              500: '#64748b',
              600: '#475569',
              700: '#334155',
              800: '#1e293b',
              900: '#0f172a',
            }
          },
          fontFamily: {
            sans: ['SF Pro Display', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Inter', 'sans-serif']
          },
          boxShadow: {
            'card': '0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)',
            'card-hover': '0 20px 25px -5px rgba(0, 0, 0, 0.15), 0 10px 10px -5px rgba(0, 0, 0, 0.05)',
            'modal': '0 25px 50px -12px rgba(0, 0, 0, 0.25)'
          },
          transitionProperty: {
            'width': 'width',
            'height': 'height'
          }
        }
      }
    }
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    body { 
      font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Inter, sans-serif; 
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    /* Premium animations */
    .fade-in { 
      animation: fadeIn 0.5s cubic-bezier(0.16, 1, 0.3, 1); 
    }
    .card-lift {
      transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1), box-shadow 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .card-lift:hover {
      transform: translateY(-8px);
      box-shadow: var(--tw-shadow-card-hover);
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    /* Product image styling */
    .product-image {
      transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
      will-change: transform;
    }
    .product-card:hover .product-image {
      transform: scale(1.05);
    }
    
    /* Gold accent for premium elements */
    .premium-badge {
      background: linear-gradient(135deg, #fbbf24, #f59e0b);
      color: #1e293b;
      font-weight: 700;
    }
    
    /* Loading shimmer */
    .loading {
      background: linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%);
      background-size: 200% 100%;
      animation: shimmer 1.8s infinite;
    }
    @keyframes shimmer {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: #f1f5f9; }
    ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    .dark ::-webkit-scrollbar-track { background: #1e293b; }
    .dark ::-webkit-scrollbar-thumb { background: #334155; }
    .dark ::-webkit-scrollbar-thumb:hover { background: #475569; }
  </style>
</head>
<body class="bg-slate-50 text-slate-800 dark:bg-slate-950 dark:text-slate-200 min-h-screen transition-colors duration-500">
  <!-- Header -->
  <header class="bg-white/80 dark:bg-slate-900/90 backdrop-blur-md sticky top-0 z-50 border-b border-slate-200 dark:border-slate-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center space-x-5">
          <div class="flex items-center space-x-2.5">
            <div class="w-9 h-9 bg-gradient-to-br from-blue-500 to-indigo-700 rounded-xl flex items-center justify-center shadow-lg">
              <span class="text-white font-semibold text-sm tracking-tight">TH</span>
            </div>
            <span class="text-xl font-semibold text-slate-900 dark:text-white tracking-tight">TechHub</span>
          </div>
          <nav class="hidden md:flex space-x-8">
            <a href="#" class="text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-medium relative group">
              Home
              <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-500 dark:bg-blue-400 transition-all group-hover:w-full"></span>
            </a>
            <a href="#" class="text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-medium relative group">
              Shop
              <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-500 dark:bg-blue-400 transition-all group-hover:w-full"></span>
            </a>
            <a href="#" class="text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-medium relative group">
              Enterprise
              <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-500 dark:bg-blue-400 transition-all group-hover:w-full"></span>
            </a>
            <a href="#" class="text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-medium relative group">
              Support
              <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-500 dark:bg-blue-400 transition-all group-hover:w-full"></span>
            </a>
          </nav>
        </div>

        <div class="flex items-center space-x-4">
          <!-- Dark Mode Toggle -->
          <button id="darkModeToggle" class="p-2.5 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
            <svg id="sunIcon" class="w-5 h-5 text-yellow-500 hidden" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd" />
            </svg>
            <svg id="moonIcon" class="w-5 h-5 text-slate-700 dark:text-slate-300" fill="currentColor" viewBox="0 0 20 20">
              <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
            </svg>
          </button>

          <div class="relative hidden md:block">
            <svg class="absolute left-3.5 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
            <input
              type="text"
              id="searchInput"
              placeholder="Search products..."
              class="pl-11 pr-4 py-2.5 w-64 border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
            />
          </div>

          <button id="filterBtn" class="p-2.5 text-slate-600 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 md:hidden">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path>
            </svg>
          </button>

          <button id="cartBtn" class="relative p-2.5 text-slate-600 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path>
            </svg>
            <span id="cartCount" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center text-[10px] font-medium">0</span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="bg-gradient-to-br from-slate-900 to-slate-800 text-white pt-24 pb-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-3xl mx-auto text-center">
        <div class="inline-flex items-center px-4 py-1.5 rounded-full bg-blue-500/20 mb-6">
          <span class="w-2 h-2 bg-blue-400 rounded-full mr-2"></span>
          <span class="text-blue-200 text-sm font-medium">Premium Technology Collection</span>
        </div>
        
        <h1 class="text-4xl md:text-6xl font-bold mb-6 tracking-tight">
          Engineered for Excellence
        </h1>
        <p class="text-xl text-slate-300 mb-10 max-w-2xl mx-auto leading-relaxed">
          Discover meticulously crafted technology designed for professionals who demand unparalleled performance, precision, and elegance.
        </p>
        
        <div class="flex flex-col sm:flex-row justify-center gap-4">
          <button onclick="document.getElementById('products').scrollIntoView({behavior: 'smooth'})" 
                  class="px-8 py-4 bg-white text-slate-900 rounded-xl font-semibold hover:bg-slate-100 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
            Explore Collection
          </button>
          <button class="px-8 py-4 bg-transparent border border-slate-700 text-white rounded-xl font-semibold hover:bg-slate-800/50 transition-all">
            View Catalog
          </button>
        </div>
      </div>
      
      <!-- Hero Product Showcase -->
      <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="bg-slate-800/50 backdrop-blur-sm rounded-2xl p-6 border border-slate-700/50">
          <div class="flex items-center mb-4">
            <div class="w-3 h-3 bg-green-400 rounded-full mr-2"></div>
            <span class="text-green-300 font-medium">In Stock</span>
          </div>
          <h3 class="text-lg font-semibold mb-2">MacBook Pro 16"</h3>
          <p class="text-slate-400 text-sm mb-4">M3 Max ‚Ä¢ 32GB RAM ‚Ä¢ 1TB SSD</p>
          <div class="flex items-center justify-between">
            <span class="text-2xl font-bold text-white">$2,499</span>
            <span class="text-slate-500 line-through text-sm">$2,799</span>
          </div>
        </div>
        
        <div class="bg-slate-800/50 backdrop-blur-sm rounded-2xl p-6 border border-slate-700/50">
          <div class="flex items-center mb-4">
            <div class="w-3 h-3 bg-green-400 rounded-full mr-2"></div>
            <span class="text-green-300 font-medium">In Stock</span>
          </div>
          <h3 class="text-lg font-semibold mb-2">iPhone 15 Pro</h3>
          <p class="text-slate-400 text-sm mb-4">Titanium ‚Ä¢ A17 Pro ‚Ä¢ 256GB</p>
          <div class="flex items-center justify-between">
            <span class="text-2xl font-bold text-white">$1,099</span>
            <span class="text-slate-500 line-through text-sm">$1,199</span>
          </div>
        </div>
        
        <div class="bg-slate-800/50 backdrop-blur-sm rounded-2xl p-6 border border-slate-700/50">
          <div class="flex items-center mb-4">
            <div class="w-3 h-3 bg-amber-400 rounded-full mr-2"></div>
            <span class="text-amber-300 font-medium">Limited Stock</span>
          </div>
          <h3 class="text-lg font-semibold mb-2">Sony WH-1000XM5</h3>
          <p class="text-slate-400 text-sm mb-4">Premium ANC ‚Ä¢ 30hr Battery</p>
          <div class="flex items-center justify-between">
            <span class="text-2xl font-bold text-white">$349</span>
            <span class="text-slate-500 line-through text-sm">$399</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Category Filter -->
  <section class="py-12 bg-white dark:bg-slate-900">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-slate-900 dark:text-white mb-4">Shop by Category</h2>
        <p class="text-slate-600 dark:text-slate-400 max-w-2xl mx-auto">
          Curated collections of premium technology, organized for effortless discovery.
        </p>
      </div>
      
      <div class="flex flex-wrap justify-center gap-3 md:gap-4" id="categoryFilters">
        <!-- Categories will be injected -->
      </div>
    </div>
  </section>

  <!-- Mobile Search -->
  <div class="md:hidden px-4 py-3 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800">
    <div class="relative">
      <svg class="absolute left-3.5 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
      </svg>
      <input
        type="text"
        id="mobileSearchInput"
        placeholder="Search products..."
        class="pl-11 pr-4 py-3 w-full border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"
      />
    </div>
  </div>

  <!-- Products Grid -->
  <section id="products" class="py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-4 gap-8" id="productsGrid">
        <!-- Products loaded by JS -->
      </div>
      
      <div id="emptyState" class="hidden text-center py-20">
        <div class="text-6xl mb-6">üîç</div>
        <h3 class="text-3xl font-bold text-slate-900 dark:text-white mb-4">No products found</h3>
        <p class="text-slate-600 dark:text-slate-400 max-w-md mx-auto mb-8">
          We couldn't find any products matching your search criteria. Try adjusting your filters.
        </p>
        <button onclick="clearFilters()" class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium transition-colors">
          Clear All Filters
        </button>
      </div>
    </div>
  </section>

  <!-- Product Detail Modal -->
  <div id="productModal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center p-4">
    <div class="bg-white dark:bg-slate-800 rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-y-auto fade-in shadow-2xl">
      <div class="p-6 md:p-8 border-b border-slate-200 dark:border-slate-700 flex flex-col md:flex-row justify-between items-start">
        <div>
          <div class="flex items-center mb-2">
            <span class="px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 text-xs font-medium rounded-full">
              Premium Collection
            </span>
          </div>
          <h2 id="modalTitle" class="text-2xl md:text-3xl font-bold text-slate-900 dark:text-white"></h2>
        </div>
        <button id="closeModalBtn" class="mt-4 md:mt-0 p-2.5 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-700">
          <svg class="w-6 h-6 text-slate-500 dark:text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      
      <div id="modalContent" class="p-6 md:p-8 grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Image -->
        <div class="flex justify-center lg:justify-start">
          <div class="relative">
            <img id="modalImage" src="" alt="" class="w-full max-w-md h-80 object-contain">
            <div class="absolute -bottom-4 -right-4">
              <div class="bg-white dark:bg-slate-900 px-4 py-2 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700">
                <div class="flex items-center">
                  <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                  <span class="text-slate-700 dark:text-slate-300 font-medium">In Stock</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Info -->
        <div>
          <div id="modalRating" class="flex items-center mb-4"></div>
          
          <div class="mb-6">
            <span id="modalPrice" class="text-4xl font-bold text-slate-900 dark:text-white"></span>
            <span id="modalOriginalPrice" class="text-slate-500 dark:text-slate-400 line-through ml-3 text-xl"></span>
            <div class="mt-2 flex items-center">
              <span class="px-3 py-1 bg-green-500/10 text-green-700 dark:text-green-400 text-sm font-medium rounded-full">
                <span class="w-1.5 h-1.5 bg-green-500 rounded-full inline-block mr-1.5"></span>
                In Stock
              </span>
            </div>
          </div>

          <p id="modalDescription" class="text-slate-600 dark:text-slate-300 mb-8 leading-relaxed"></p>
          
          <div class="mb-8">
            <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3">Quantity</label>
            <div class="flex items-center space-x-3">
              <button id="modalDec" class="w-12 h-12 rounded-xl bg-slate-100 dark:bg-slate-700 flex items-center justify-center hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors">
                <svg class="w-5 h-5 text-slate-600 dark:text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                </svg>
              </button>
              <span id="modalQty" class="w-14 text-center text-lg font-semibold">1</span>
              <button id="modalInc" class="w-12 h-12 rounded-xl bg-slate-100 dark:bg-slate-700 flex items-center justify-center hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors">
                <svg class="w-5 h-5 text-slate-600 dark:text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                </svg>
              </button>
            </div>
          </div>

          <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space
             // Render helpers
    function renderStars(rating) {
      const full = Math.floor(rating);
      const hasHalf = rating % 1 >= 0.5;
      const empty = 5 - full - (hasHalf ? 1 : 0);
      let stars = '';
      for (let i = 0; i < full; i++) {
        stars += '<svg class="w-5 h-5 text-amber-400 fill-current" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>';
      }
      if (hasHalf) {
        stars += '<svg class="w-5 h-5 text-amber-400" fill="currentColor" viewBox="0 0 20 20"><defs><linearGradient id="half"><stop offset="50%" stop-color="currentColor"/><stop offset="50%" stop-color="transparent"/></linearGradient></defs><path fill="url(#half)" d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>';
      }
      for (let i = 0; i < empty; i++) {
        stars += '<svg class="w-5 h-5 text-slate-300 dark:text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>';
      }
      return `<div class="flex items-center">${stars}<span class="ml-2 font-medium text-slate-700 dark:text-slate-300">${rating}</span></div>`;
    }

    function renderCategories() {
      categoryFilters.innerHTML = categories.map(cat => `
        <button data-category="${cat.id}" class="px-5 py-2.5 rounded-xl font-medium transition-all ${
          selectedCategory === cat.id
            ? 'bg-blue-600 text-white shadow-md'
            : 'bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700'
        }">
          ${cat.name}
          <span class="ml-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 text-xs px-2 py-0.5 rounded-full">${cat.count}</span>
        </button>
      `).join('');
    }

    function renderProducts() {
      const filtered = products.filter(product => {
        const matchesSearch = product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                             product.description.toLowerCase().includes(searchTerm.toLowerCase());
        const matchesCategory = selectedCategory === 'all' || product.category === selectedCategory;
        return matchesSearch && matchesCategory;
      });

      if (filtered.length === 0) {
        productsGrid.classList.add('hidden');
        emptyState.classList.remove('hidden');
      } else {
        productsGrid.classList.remove('hidden');
        emptyState.classList.add('hidden');
        productsGrid.innerHTML = filtered.map(product => `
          <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-card card-lift overflow-hidden group">
            <div class="relative">
              <img src="${product.image}" 
                   alt="${product.name}" 
                   class="w-full h-60 object-contain p-6 product-image"
                   onerror="this.src='https://placehold.co/600x400/1e293b/94a3b8?text=${encodeURIComponent(product.name.split(' ')[0])}'">
              
              <div class="absolute top-4 right-4">
                <button data-fav="${product.id}" class="p-2.5 rounded-xl transition-colors ${
                  favorites.includes(product.id)
                    ? 'bg-red-500 text-white'
                    : 'bg-white/90 dark:bg-slate-700/80 text-slate-700 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-700'
                }">
                  <svg class="w-5 h-5 ${favorites.includes(product.id) ? 'fill-current' : ''}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                  </svg>
                </button>
              </div>
              
              ${product.tags.includes('premium') ? `
                <div class="absolute top-4 left-4">
                  <span class="px-3 py-1 premium-badge text-xs font-medium rounded-full">Premium</span>
                </div>
              ` : ''}
              
              ${product.originalPrice ? `
                <div class="absolute bottom-4 left-4 bg-red-500 text-white text-sm px-3 py-1.5 rounded-lg font-medium">
                  Save $${(product.originalPrice - product.price).toFixed(0)}
                </div>
              ` : ''}
            </div>
            
            <div class="p-6">
              <div class="flex items-center mb-3">
                ${renderStars(product.rating)}
                <span class="text-slate-500 dark:text-slate-400 text-sm ml-2">(${product.reviews})</span>
              </div>
              
              <h3 class="font-semibold text-lg text-slate-900 dark:text-white mb-2">${product.name}</h3>
              <p class="text-slate-600 dark:text-slate-400 text-sm mb-4 line-clamp-2">${product.description}</p>
              
              <div class="flex items-center justify-between">
                <div>
                  <span class="text-2xl font-bold text-slate-900 dark:text-white">$${product.price.toFixed(0)}</span>
                  ${product.originalPrice ? `<span class="text-slate-500 dark:text-slate-400 line-through ml-2">$${product.originalPrice.toFixed(0)}</span>` : ''}
                </div>
                
                <button data-view="${product.id}" class="px-4 py-2 bg-slate-900 dark:bg-slate-700 text-white rounded-lg font-medium hover:bg-slate-800 dark:hover:bg-slate-600 transition-colors flex items-center">
                  <svg class="w-4 h-4 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                  </svg>
                  View
                </button>
              </div>
            </div>
          </div>
        `).join('');
      }
    }

    function openProductModal(productId) {
      const product = products.find(p => p.id === productId);
      if (!product) return;

      selectedProduct = product;
      modalQty = 1;

      document.getElementById('modalTitle').textContent = product.name;
      document.getElementById('modalImage').src = product.image;
      document.getElementById('modalImage').alt = product.name;
      document.getElementById('modalDescription').textContent = product.description;
      document.getElementById('modalPrice').textContent = `$${product.price.toFixed(0)}`;
      document.getElementById('modalOriginalPrice').textContent = product.originalPrice ? `$${product.originalPrice.toFixed(0)}` : '';
      document.getElementById('modalOriginalPrice').classList.toggle('hidden', !product.originalPrice);
      document.getElementById('modalQty').textContent = modalQty;
      document.getElementById('modalRating').innerHTML = renderStars(product.rating);

      const specsList = product.specs.map(spec => `<li class="flex items-start"><span class="text-amber-500 mr-2">‚Ä¢</span> <span class="text-slate-700 dark:text-slate-300">${spec}</span></li>`).join('');
      document.getElementById('modalSpecs').innerHTML = specsList;

      const isFav = favorites.includes(product.id);
      const heartIcon = document.getElementById('modalHeartIcon');
      document.getElementById('modalFavorite').classList.toggle('hover:bg-red-50/50', !isFav);
      document.getElementById('modalFavorite').classList.toggle('dark:hover:bg-red-900/20', !isFav);
      heartIcon.classList.toggle('text-red-500', isFav);
      heartIcon.classList.toggle('fill-current', isFav);

      productModal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }

    function updateCartUI() {
      const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
      const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      const totalPrice = subtotal.toFixed(2);

      cartCount.textContent = totalItems;
      cartItemCount.textContent = totalItems;
      cartSubtotal.textContent = `$${subtotal.toFixed(2)}`;
      cartTotal.textContent = `$${totalPrice}`;

      try {
        localStorage.setItem('techhub_cart', JSON.stringify(cart));
        localStorage.setItem('techhub_favorites', JSON.stringify(favorites));
      } catch (e) {
        // Ignore if localStorage fails
      }

      if (cart.length === 0) {
        cartEmpty.classList.remove('hidden');
        cartItems.classList.add('hidden');
        cartFooter.classList.add('hidden');
      } else {
        cartEmpty.classList.add('hidden');
        cartItems.classList.remove('hidden');
        cartFooter.classList.remove('hidden');

        cartItems.innerHTML = cart.map(item => `
          <div class="flex items-center space-x-4 p-6">
            <img src="${item.image}" alt="${item.name}" class="w-20 h-20 object-contain rounded-xl">
            <div class="flex-1">
              <h4 class="font-semibold text-slate-900 dark:text-white">${item.name}</h4>
              <p class="text-blue-600 dark:text-blue-400 font-bold mt-1">$${item.price.toFixed(0)}</p>
            </div>
            <div class="flex items-center space-x-2">
              <button data-update="${item.id}" data-action="dec" class="w-10 h-10 rounded-xl bg-slate-100 dark:bg-slate-700 flex items-center justify-center hover:bg-slate-200 dark:hover:bg-slate-600">
                <svg class="w-5 h-5 text-slate-600 dark:text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                </svg>
              </button>
              <span class="w-10 text-center font-semibold">${item.quantity}</span>
              <button data-update="${item.id}" data-action="inc" class="w-10 h-10 rounded-xl bg-slate-100 dark:bg-slate-700 flex items-center justify-center hover:bg-slate-200 dark:hover:bg-slate-600">
                <svg class="w-5 h-5 text-slate-600 dark:text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                </svg>
              </button>
            </div>
            <button data-remove="${item.id}" class="text-red-500 hover:text-red-700">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
        `).join('');
      }
    }

    function addToCart(productId, qty = 1) {
      const product = products.find(p => p.id === productId);
      if (!product) return;

      const existing = cart.find(item => item.id === productId);
      if (existing) {
        existing.quantity += qty;
      } else {
        cart.push({ ...product, quantity: qty });
      }
      updateCartUI();
    }

    function removeFromCart(productId) {
      cart = cart.filter(item => item.id !== productId);
      updateCartUI();
    }

    function updateQuantity(productId, delta) {
      const item = cart.find(i => i.id === productId);
      if (item) {
        item.quantity += delta;
        if (item.quantity < 1) {
          removeFromCart(productId);
        } else {
          updateCartUI();
        }
      }
    }

    function toggleFavorite(productId) {
      const index = favorites.indexOf(productId);
      if (index > -1) {
        favorites.splice(index, 1);
      } else {
        favorites.push(productId);
      }
      renderProducts();
      updateCartUI();
    }

    function clearFilters() {
      searchTerm = '';
      selectedCategory = 'all';
      searchInput.value = '';
      mobileSearchInput.value = '';
      renderCategories();
      renderProducts();
    }

    // Dark mode
    function initDarkMode() {
      const isDark = localStorage.getItem('darkMode') === 'true' || 
                    (!('darkMode' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches);
      
      if (isDark) {
        document.documentElement.classList.add('dark');
        sunIcon.classList.remove('hidden');
        moonIcon.classList.add('hidden');
        localStorage.setItem('darkMode', 'true');
      } else {
        document.documentElement.classList.remove('dark');
        sunIcon.classList.add('hidden');
        moonIcon.classList.remove('hidden');
        localStorage.setItem('darkMode', 'false');
      }
    }

    function toggleDarkMode() {
      const isDark = document.documentElement.classList.toggle('dark');
      localStorage.setItem('darkMode', isDark);
      if (isDark) {
        sunIcon.classList.remove('hidden');
        moonIcon.classList.add('hidden');
      } else {
        sunIcon.classList.add('hidden');
        moonIcon.classList.remove('hidden');
      }
    }

    // Event bindings
    function bindEvents() {
      // Search
      searchInput.addEventListener('input', (e) => {
        searchTerm = e.target.value;
        renderProducts();
      });
      mobileSearchInput.addEventListener('input', (e) => {
        searchTerm = e.target.value;
        renderProducts();
      });

      // Category filters
      categoryFilters.addEventListener('click', (e) => {
        if (e.target.tagName === 'BUTTON') {
          selectedCategory = e.target.dataset.category;
          renderCategories();
          renderProducts();
        }
      });

      // Product actions
      productsGrid.addEventListener('click', (e) => {
        if (e.target.closest('[data-view]')) {
          const id = parseInt(e.target.closest('[data-view]').dataset.view);
          openProductModal(id);
        } else if (e.target.closest('[data-fav]')) {
          const id = parseInt(e.target.closest('[data-fav]').dataset.fav);
          toggleFavorite(id);
        }
      });

      // Modal controls
      closeModalBtn.addEventListener('click', () => {
        productModal.classList.add('hidden');
        document.body.style.overflow = '';
      });
      document.getElementById('modalInc').addEventListener('click', () => {
        modalQty = Math.min(modalQty + 1, 99);
        document.getElementById('modalQty').textContent = modalQty;
      });
      document.getElementById('modalDec').addEventListener('click', () => {
        modalQty = Math.max(modalQty - 1, 1);
        document.getElementById('modalQty').textContent = modalQty;
      });
      document.getElementById('modalAddToCart').addEventListener('click', () => {
        if (selectedProduct) {
          addToCart(selectedProduct.id, modalQty);
          productModal.classList.add('hidden');
          document.body.style.overflow = '';
        }
      });
      document.getElementById('modalFavorite').addEventListener('click', () => {
        if (selectedProduct) {
          toggleFavorite(selectedProduct.id);
        }
      });

      // Cart actions
      cartBtn.addEventListener('click', () => {
        cartModal.classList.remove('hidden');
      });
      closeCartBtn.addEventListener('click', () => {
        cartModal.classList.add('hidden');
      });
      cartItems.addEventListener('click', (e) => {
        if (e.target.closest('[data-remove]')) {
          const id = parseInt(e.target.closest('[data-remove]').dataset.remove);
          removeFromCart(id);
        } else if (e.target.closest('[data-update]')) {
          const btn = e.target.closest('[data-update]');
          const id = parseInt(btn.dataset.update);
          const action = btn.dataset.action;
          updateQuantity(id, action === 'inc' ? 1 : -1);
        }
      });

      continueShoppingBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          cartModal.classList.add('hidden');
        });
      });

      // Close modals on outside click
      [cartModal, productModal].forEach(modal => {
        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            modal.classList.add('hidden');
            document.body.style.overflow = '';
          }
        });
      });

      // Mobile filter
      filterBtn.addEventListener('click', () => {
        categoryFilters.scrollIntoView({ behavior: 'smooth' });
      });

      // Dark mode
      darkModeToggle.addEventListener('click', toggleDarkMode);
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      initDarkMode();
      renderCategories();
      renderProducts();
      updateCartUI();
      bindEvents();
    });
  </script>
</body>
</html>
